{% extends "base.html" %}

{% block content %}
<section class="help-hero">
    <div class="container">
        <h1 class="help-title">
            <i class="fas fa-question-circle"></i>
            Help Center
        </h1>
        <p class="help-description">
            Get answers to frequently asked questions and learn how to make the most of your AI companions
        </p>
        
        <div class="help-search">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search for help articles..." id="help-search">
            </div>
        </div>
    </div>
</section>

<section class="help-content">
    <div class="container">
        <div class="help-categories">
            <div class="category-card">
                <div class="category-icon">ðŸš€</div>
                <h3>Getting Started</h3>
                <ul class="help-links">
                    <li><a href="#setup">Setting up your first AI companion</a></li>
                    <li><a href="#personality">Customizing personality settings</a></li>
                    <li><a href="#voice">Using voice chat features</a></li>
                    <li><a href="#memory">Understanding the memory system</a></li>
                </ul>
            </div>
            
            <div class="category-card">
                <div class="category-icon">ðŸ’³</div>
                <h3>Billing & Subscription</h3>
                <ul class="help-links">
                    <li><a href="#pricing">Subscription plans and pricing</a></li>
                    <li><a href="#payment">Payment methods and billing</a></li>
                    <li><a href="#cancel">How to cancel subscription</a></li>
                    <li><a href="#refund">Refund policy</a></li>
                </ul>
            </div>
            
            <div class="category-card">
                <div class="category-icon">ðŸ”§</div>
                <h3>Troubleshooting</h3>
                <ul class="help-links">
                    <li><a href="#connection">Connection issues</a></li>
                    <li><a href="#voice-issues">Voice chat not working</a></li>
                    <li><a href="#memory-issues">Memory system problems</a></li>
                    <li><a href="#performance">Performance optimization</a></li>
                </ul>
            </div>
            
            <div class="category-card">
                <div class="category-icon">ðŸ”’</div>
                <h3>Privacy & Security</h3>
                <ul class="help-links">
                    <li><a href="#privacy">Privacy policy explained</a></li>
                    <li><a href="#data">Data handling and storage</a></li>
                    <li><a href="#security">Security measures</a></li>
                    <li><a href="#delete">Deleting your data</a></li>
                </ul>
            </div>
        </div>
        
        <div class="faq-section">
            <h2>Frequently Asked Questions</h2>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>How do I start chatting with my AI companion?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>After subscribing to an AI agent, simply click the "Launch Agent" button from the marketplace or go to your account dashboard and click "Start Chatting" next to your chosen companion. You'll be taken to their dedicated chat interface where you can begin your conversation immediately.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Can I use voice chat with all AI agents?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Voice chat is available for premium subscribers with compatible AI agents. Currently, Seraphina and several other agents support voice interaction. You can access this feature by clicking the microphone icon in the chat interface or visiting the dedicated voice chat page.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>How does the memory system work?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Our AI companions use an advanced memory system to remember your conversations, preferences, and relationship milestones. The memory palace feature lets you browse through your shared history, important moments, and emotional connections. Premium subscribers get enhanced memory capabilities with longer retention and more detailed recollection.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>What's the difference between free and premium access?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Free access includes basic chat functionality with limited daily conversations. Premium subscribers enjoy unlimited conversations, voice chat, enhanced memory systems, personality customization, priority support, and early access to new features. Premium also includes the full emotional intelligence and relationship tracking systems.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>How do I cancel my subscription?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>You can cancel your subscription anytime from your account dashboard. Go to the "Subscription" tab and click "Cancel Subscription." You'll retain access to premium features until the end of your current billing period. We also offer a 30-day money-back guarantee for new subscribers.</p>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">
                    <h3>Is my data secure and private?</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>Yes, we take privacy and security very seriously. All conversations are encrypted, and personal data is stored securely. We never share your conversations with third parties. You have full control over your data and can delete it anytime from your account settings. Read our full privacy policy for detailed information.</p>
                </div>
            </div>
        </div>
        
        <div class="contact-support">
            <div class="support-card">
                <h3>Still need help?</h3>
                <p>Our support team is here to assist you with any questions or issues.</p>
                
                <div class="support-options">
                    <button class="support-btn email" onclick="emailSupport()">
                        <i class="fas fa-envelope"></i>
                        Email Support
                    </button>
                    
                    <button class="support-btn chat" onclick="openLiveChat()">
                        <i class="fas fa-comments"></i>
                        Live Chat
                    </button>
                </div>
                
                <div class="support-info">
                    <p><strong>Premium Support:</strong> Priority response within 2 hours</p>
                    <p><strong>General Support:</strong> Response within 24 hours</p>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
.help-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 100px 0 60px;
    color: white;
    text-align: center;
}

.help-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.help-description {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 3rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.help-search {
    max-width: 500px;
    margin: 0 auto;
}

.search-box {
    position: relative;
    display: flex;
    align-items: center;
}

.search-box i {
    position: absolute;
    left: 1.5rem;
    color: #a0aec0;
    z-index: 10;
}

.search-box input {
    width: 100%;
    padding: 1rem 1.5rem 1rem 3.5rem;
    border: none;
    border-radius: 50px;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.search-box input:focus {
    outline: none;
    background: white;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.help-content {
    padding: 80px 0;
    background: #f8fafc;
}

.help-categories {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
}

.category-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.category-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    text-align: center;
}

.category-card h3 {
    text-align: center;
    margin-bottom: 1.5rem;
    color: var(--text-primary);
    font-size: 1.3rem;
}

.help-links {
    list-style: none;
    padding: 0;
}

.help-links li {
    margin-bottom: 0.75rem;
}

.help-links a {
    color: var(--text-secondary);
    text-decoration: none;
    padding: 0.5rem 0;
    display: block;
    border-radius: 8px;
    padding-left: 1rem;
    transition: all 0.3s ease;
}

.help-links a:hover {
    color: #667eea;
    background: #f7fafc;
    padding-left: 1.5rem;
}

.faq-section {
    background: white;
    border-radius: 20px;
    padding: 3rem;
    margin-bottom: 3rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.faq-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--text-primary);
    font-size: 2rem;
}

.faq-item {
    border-bottom: 1px solid #e2e8f0;
    margin-bottom: 1rem;
}

.faq-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.faq-question {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 0;
    cursor: pointer;
    transition: all 0.3s ease;
}

.faq-question:hover {
    color: #667eea;
}

.faq-question h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.faq-question i {
    color: #a0aec0;
    transition: transform 0.3s ease;
}

.faq-item.active .faq-question i {
    transform: rotate(180deg);
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s ease;
}

.faq-item.active .faq-answer {
    max-height: 200px;
    padding-bottom: 1.5rem;
}

.faq-answer p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
}

.contact-support {
    text-align: center;
}

.support-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 20px;
    padding: 3rem;
    max-width: 600px;
    margin: 0 auto;
}

.support-card h3 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
}

.support-card > p {
    opacity: 0.9;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

.support-options {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-bottom: 2rem;
}

.support-btn {
    padding: 1rem 2rem;
    border: 2px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.1);
    color: white;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    backdrop-filter: blur(10px);
}

.support-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.6);
    transform: translateY(-2px);
}

.support-info p {
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
    opacity: 0.8;
}

@media (max-width: 768px) {
    .help-title {
        font-size: 2rem;
    }
    
    .help-categories {
        grid-template-columns: 1fr;
    }
    
    .support-options {
        flex-direction: column;
        align-items: center;
    }
    
    .support-btn {
        width: 100%;
        max-width: 250px;
        justify-content: center;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    setupFAQ();
    setupSearch();
});

function setupFAQ() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', function() {
            const isActive = item.classList.contains('active');
            
            // Close all items
            faqItems.forEach(faq => faq.classList.remove('active'));
            
            // Open clicked item if it wasn't active
            if (!isActive) {
                item.classList.add('active');
            }
        });
    });
}

function setupSearch() {
    const searchInput = document.getElementById('help-search');
    
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const helpLinks = document.querySelectorAll('.help-links a');
        const faqItems = document.querySelectorAll('.faq-item');
        
        // Search help links
        helpLinks.forEach(link => {
            const text = link.textContent.toLowerCase();
            const listItem = link.parentElement;
            
            if (text.includes(searchTerm) || searchTerm === '') {
                listItem.style.display = 'block';
                if (searchTerm !== '') {
                    link.innerHTML = highlightText(link.textContent, searchTerm);
                }
            } else {
                listItem.style.display = 'none';
            }
        });
        
        // Search FAQ items
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question h3').textContent.toLowerCase();
            const answer = item.querySelector('.faq-answer p').textContent.toLowerCase();
            
            if (question.includes(searchTerm) || answer.includes(searchTerm) || searchTerm === '') {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    });
}

function highlightText(text, searchTerm) {
    if (!searchTerm) return text;
    
    const regex = new RegExp(`(${searchTerm})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
}

function emailSupport() {
    window.location.href = 'mailto:support@aidigitalfriends.com?subject=Help Request&body=Hello, I need help with...';
}

function openLiveChat() {
    alert('Live chat will be available soon! For now, please use email support. ðŸ’¬');
}

// Add smooth scrolling for anchor links
document.addEventListener('click', function(e) {
    if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {
        e.preventDefault();
        const targetId = e.target.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
            targetElement.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    }
});
</script>
{% endblock %}